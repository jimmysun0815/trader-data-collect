# CEXæ•°æ®æ–‡ä»¶æ—¶é—´åˆ‡åˆ†è¯´æ˜

## ğŸ“… æ—¶é—´åŸºå‡†

**ä½¿ç”¨ UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰ä½œä¸ºåŸºå‡†æ—¶é—´**

## ğŸ• åˆ‡åˆ†è§„åˆ™

### 12å°æ—¶æ—¶æ®µåˆ’åˆ†

| æ—¶æ®µæ ‡è¯† | UTCæ—¶é—´èŒƒå›´ | åŒ—äº¬æ—¶é—´ (UTC+8) | ç¾ä¸œæ—¶é—´ (ET, UTC-5) |
|---------|------------|----------------|---------------------|
| `00-12` | 00:00 - 11:59 | 08:00 - 19:59 | å‰ä¸€å¤© 19:00 - 06:59 |
| `12-24` | 12:00 - 23:59 | 20:00 - æ¬¡æ—¥ 07:59 | 07:00 - 18:59 |

### æ–‡ä»¶åˆ‡æ¢æ—¶åˆ»

- **UTC 00:00** ï¼ˆåŒ—äº¬08:00 / ç¾ä¸œå‰ä¸€å¤©19:00ï¼‰
- **UTC 12:00** ï¼ˆåŒ—äº¬20:00 / ç¾ä¸œ07:00ï¼‰

## ğŸ“ æ–‡ä»¶å‘½åæ ¼å¼

```
cex_{asset}_{YYYYMMDD}_{session}.csv
```

### å‚æ•°è¯´æ˜

- `{asset}`: èµ„äº§åç§°ï¼ˆbtc, ethï¼‰
- `{YYYYMMDD}`: UTCæ—¥æœŸ
- `{session}`: æ—¶æ®µæ ‡è¯†ï¼ˆ00-12 æˆ– 12-24ï¼‰

### ç¤ºä¾‹

```
cex_btc_20260112_00-12.csv  â†’ BTCæ•°æ®ï¼Œ2026-01-12 UTC 00:00-11:59
cex_btc_20260112_12-24.csv  â†’ BTCæ•°æ®ï¼Œ2026-01-12 UTC 12:00-23:59
cex_eth_20260112_00-12.csv  â†’ ETHæ•°æ®ï¼Œ2026-01-12 UTC 00:00-11:59
cex_eth_20260112_12-24.csv  â†’ ETHæ•°æ®ï¼Œ2026-01-12 UTC 12:00-23:59
```

## ğŸ“Š æ–‡ä»¶å¤§å°

- **æ­£å¸¸12å°æ—¶æ–‡ä»¶**: çº¦ 15-17 MB
- **æ¯ç§’é‡‡é›†1æ¬¡**: çº¦ 43,200 è¡Œ/12å°æ—¶
- **CSVæ ¼å¼**: timestamp, venue, asset, bid, ask, bid_size, ask_size

## ğŸ”„ è‡ªåŠ¨åˆ‡æ¢æœºåˆ¶

é‡‡é›†å™¨æ¯æ¬¡å†™å…¥æ—¶éƒ½ä¼šæ£€æŸ¥å½“å‰æ—¶æ®µï¼š

```python
def get_12h_session() -> str:
    hour = datetime.now(timezone.utc).hour
    return "00-12" if hour < 12 else "12-24"
```

- å¦‚æœæ—¶æ®µå‘ç”Ÿå˜åŒ–ï¼ˆå¦‚ä»11:59è¿›å…¥12:00ï¼‰ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ–‡ä»¶
- æ—§æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨å…³é—­
- æ–°æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºå¹¶å†™å…¥CSV header

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ—¶åŒºä¸€è‡´æ€§
**æ‰€æœ‰æ—¶é—´éƒ½åŸºäºUTC**ï¼Œåœ¨æœ¬åœ°è¯»å–æ•°æ®æ—¶éœ€è¦æ³¨æ„ï¼š
- æ–‡ä»¶åä¸­çš„æ—¥æœŸæ˜¯UTCæ—¥æœŸ
- CSVä¸­çš„timestampæ˜¯UTCæ—¶é—´æˆ³

### 2. è·¨æ—¶æ®µæŸ¥è¯¢
å¦‚æœä½ çš„äº¤æ˜“ç­–ç•¥éœ€è¦è·¨æ—¶æ®µçš„è¿ç»­æ•°æ®ï¼ˆå¦‚æŸ¥è¯¢UTC 11:00-13:00çš„æ•°æ®ï¼‰ï¼Œéœ€è¦ï¼š
```python
# ä¼ªä»£ç 
data_00_12 = read_csv("cex_btc_20260112_00-12.csv")  # å–11:00-11:59
data_12_24 = read_csv("cex_btc_20260112_12-24.csv")  # å–12:00-13:00
combined = concat([data_00_12, data_12_24])
```

### 3. æ–‡ä»¶å®Œæ•´æ€§
- å¦‚æœæœåŠ¡åœ¨æŸä¸ªæ—¶æ®µä¸­é€”åœæ­¢åˆé‡å¯ï¼Œä¼š**è¿½åŠ å†™å…¥**åŒä¸€ä¸ªæ–‡ä»¶
- ä¸ä¼šåˆ›å»ºé‡å¤æ–‡ä»¶
- å¯ä»¥é€šè¿‡timestampåˆ¤æ–­æ•°æ®æ˜¯å¦è¿ç»­

## ğŸ” å®æ—¶è¯»å–ç¤ºä¾‹

```python
from pathlib import Path
from datetime import datetime, timezone
import pandas as pd

def get_current_cex_file(asset: str, data_dir: Path) -> Path:
    """è·å–å½“å‰æ­£åœ¨å†™å…¥çš„CEXæ–‡ä»¶"""
    now = datetime.now(timezone.utc)
    date_str = now.strftime("%Y%m%d")
    hour = now.hour
    session = "00-12" if hour < 12 else "12-24"
    return data_dir / f"cex_{asset}_{date_str}_{session}.csv"

# ä½¿ç”¨ç¤ºä¾‹
data_dir = Path("/Users/jimmysun/Desktop/workspace/polymarket/real_hot")
current_file = get_current_cex_file("btc", data_dir)

# è¯»å–æœ€æ–°Nè¡Œ
df = pd.read_csv(current_file)
latest_100 = df.tail(100)  # æœ€æ–°100æ¡è®°å½•
```

## ğŸ“ˆ æ•°æ®å»¶è¿Ÿ

- **é‡‡é›†å»¶è¿Ÿ**: < 1ç§’ï¼ˆæ¯ç§’é‡‡é›†1æ¬¡ï¼‰
- **SSHFSå»¶è¿Ÿ**: < 100msï¼ˆæœ¬åœ°Macå¯ä»¥å®æ—¶çœ‹åˆ°VPSå†™å…¥ï¼‰
- **æ€»å»¶è¿Ÿ**: < 1.1ç§’

å¯¹äºè‡ªåŠ¨äº¤æ˜“æœºå™¨äººæ¥è¯´ï¼Œè¿™ä¸ªå»¶è¿Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚

## ğŸ› ï¸ ç›¸å…³è„šæœ¬

- é‡‡é›†å™¨: `cex_multi_asset_recorder.py`
- æœåŠ¡ç®¡ç†: `systemctl --user {start|stop|status} cex-recorder.service`
- å¥åº·æ£€æŸ¥: `./check_system_health.sh`
